@model IEnumerable<IntraNet.Models.Processo>

<h2>Processos</h2>

@if (User.IsInRole("Admin"))
{
    <a asp-action="Criar" class="btn btn-primary mb-3">+ Novo Processo</a>
}

@foreach (var item in Model)
{
    <div class="card mb-3">
        <div class="card-body">
            <h5>@item.Titulo</h5>
            <p>@item.Descricao</p>
            <small>Setor: @item.Setor</small><br />

            <a href="@item.ArquivoPath" class="btn btn-success btn-sm" download>
                ⬇️ Baixar Arquivo
            </a>

            @if (User.IsInRole("Admin"))
            {
                <div class="mt-2">
                    <a asp-action="Editar" asp-route-id="@item.ProcessoId"
                       class="btn btn-warning btn-sm">Editar</a>

                    <a asp-action="Excluir" asp-route-id="@item.ProcessoId"
                       class="btn btn-danger btn-sm"
                       onclick="return confirm('Deseja excluir este processo?');">
                        Excluir
                    </a>
                </div>
            }
        </div>
    </div>
}
